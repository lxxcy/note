# linux基础
## linux系统目录结构
linux目录结构是**树形结构**
windows可以拥有**多个盘符**，如C、D、E盘(顶级目录可以有多个)
linux**没有盘符**的概念，只有**一个根目录/**，所有文件都在它下面

在linux中，路径之间的层级关系，使用**反斜杠**`\`表示
* `D:\backup\notebook\C`
  * `D:`表示D盘
  * `\`表示层级关系

在windows中，路径之间的层级关系，使用**斜杠**`/`表示
* `/user/local/hello.txt`
  * 开头的`/`表示根目录
  * 后面的`/`表示层级关系

## linux命令基础
Linux命令，本体是一个个**二进制可执行程序**

通用格式:
`command [-options] [parameter]`
* conmand：命令本身
* -options：[可选]命令的一些选项，可以通过选项控制命令的行为细节
* parameter：[可选]命令的参数，多数用于命令的指向目标

### ls命令
ls命令作用：列出目录下的内容
`ls [-a -1 -h] [Linux路径]`
* -a -l -h是**可选**的选项
* Linux路径是此命令**可选**的参数

* 当不使用选项和参数，直接使用ls命令本体，表示以**平铺**形式，列出**当前工作目录下**的内容
* 当使用参数，ls命令的参数表示：指定一个linux路径，列出指定路径的内容

选项：
* -a选项，表示：all，即列出全部文件（包含隐藏的文件、文件夹——以.开头）
* -l选项，表示：list，以**列表**的形式展示内容，并显示更多信息
* -h选项，以易于阅读的形式，列出文件大小，如K、M、G，
  注意：**-h与-l是绑定的**，-h不能单独使用

ls命令选项组合使用方法：（以下三种方式的相等）
* ls -l -a
* ls -la
* ls -al

HOME目录：
每个Linux操作用户在Linux系统的**个人账户目录**，路径在`/home/用户名`

### 目录切换相关命令(cd/pwd)
linux终端打开时，会默认以用户的HOME目录作为当前工作目录，可通过cd更改当前所在的工作姆露露

cd——Change Directory
作用：切换工作目录
语法：`cd [Linux路径]`
* cd命令无需选项，只有参数，表示要切换到哪个目录下
* cd命令直接执行，不写参数，表示回到用户的HOME目录

通过ls来验证当前工作目录是不恰当的
pwd——Print Work Directory
作用：查看当前所在的工作目录
语法：`pwd`
* pwd命令，无选项，无参数
 
 ### 绝对路径和相对路径
绝对路径：以**根目录为起点**，描述路径的一种写法，路径描述以`/`开头
相对路径：以**当前目录为起点**，描述路径的一种写法，路径描述无需以/开头
若无特殊需求，常使用相对路径

特殊路径符：
- . 表示**当前目录**，如`cd ./Desktop`表示切换到当前目录下的Desktop目录内，和`cd Desktop`效果一致
- ..表示**上一级目录**，如`cd ..`可切换到上一级目录，`cd ../..`切换到上二级目录，`cd ../../..`退回三级
- ~ 表示**HOME目录**，如`cd ~`即可切换到HOME目录，`cd ~/Desktop`切换到HOME目录下的Desktop目录

### 创建目录命令mkdir
mkdir——Make Directory
作用：通过mkdir命令可以创建新的**目录（文件夹）**
语法：`mkdir [-p] Linux路径`
- 参数**必填**，表示linux路径，即要创建的文件夹的路径，绝对路径或相对路径均可
- -p**可选**，表示自动创建不存在的父目录，适用于创建连续多层级的目录

注意：创建文件夹需要修改权限，尽量确保均在HOME目录内，不要在HOME外操作，否则将涉及权限问题，导致创建不成功

### touch、cat、more
> touch命令

作用：创建**文件**
语法：`touch Linux路径`
- touch命令无选项，参数必填，表示要创建的文件路径，相对、绝对、特殊路径均可以使用

> cat命令

作用：查看文件内容
语法：`cat Linux路径`
- cat没有选项，参数必填，参数表示被查看的文件路径，相对、绝对、特殊路径均可使用

> more命令

作用：查看文件内容，但与cat不同：
- cat直接将内容全部显示出来
- more支持**翻页**，若文件内容过多，可以一页一页显示

语法：`more Linux路径`
- 没有选项，参数必填，参数表示：被查看的文件路径，绝对、相对、特殊路径符都可使用
- 查看过程中：按**空格**翻页，按q退出查看


### cp、mv、rm
cp——copy
作用：赋值文件/文件夹
语法：`cp [-r] 参数1 参数2`
- -r选项，可选，用于复制文件夹使用，表示递归
- 参数1，Linux路径，表示被复制的文件或文件夹
- 参数2，Linux路径，表示要赋值去的位置

mv——move
作用：移动文件/文件夹
语法：`mv 参数1 参数2`
- 参数1，Linux路径，表示被移动的文件或文件夹
- 参数2，Linux路径，表示要移动去的地方，
  若目标不存在，则进行**改名**，确保目标存在

rm——remove
作用：删除文件/文件夹
语法：`rm [-r -f] 参数1 参数2 ...参数N`
- -r选项，用于删除文件夹
- -f选项，即force，强制删除（不会弹出提示确认信息）
  - 普通用户删除内容不会弹出提示，只有root管理员用户删除内容会有提示
  - 所以一般用户用不到-f选项
- 参数1、参数2、...参数N 表示要删除的文件或文件夹路径（可同时删除多个文件），按照空格隔开

rm命令支持通配符`*`，用来做模糊匹配
- 符号`*`表示通配符，即匹配任意内容（包含空）
  - `test*`，表示匹配任何以test开头的内容
  - `*test`，表示佩佩任何以test结尾的内容
  - `*test*`，表示匹配任何包含test的内容

注意：rm命令十分危险，特别是处于root（超级管理员）用户的时候，应谨慎使用
如以下命令应在root用户下禁用：
- `rm -rf /`
- `rm -rf /*`
该两行命令作用等同于格式化硬盘

补：进入root模式
- 输入命令`su - root`
- 再输入密码即可进入root模式
- 若要退出，则输入`exit`

### which和find
which命令
Linux命令，本质上是二进制可执行文件
作用：查看所使用**命令**的程序文件的位置
语法：`which 要查找的命令`

find命令
按文件名查找**文件**
语法：`find 起始路径 -name "被查找文件名"`

find命令也支持通配符`*`来做模糊匹配
- 如`find / -name "*test*"`
  Tips：ctrl+c可停止查找

按文件大小查找文件
语法：`find 起始路径 -size +/-n[kMG]`
- +、-表示大于和小于
- n表示大小数字
- kMG表示大小单位，仅写一个，k（小写）表示kb（即1B），M表示MB，G表示GB
- 如`find / -size +10k`

### grep和wc
grep命令：
作用：从**文件**中，通过关键字过滤文件行
语法：`grep [-n] 关键字 文件路径`
- 选项-n，可选，表示在结果中显示匹配行的行号
- 关键字，必填，表示过滤的关键字，建议用""将关键字包围（如有空格或其他特殊符号）
- 文件路径，必填，表示要过滤内容的文件路径，**可作为内容输入端口**

wc命令：
作用：统计文件的行数、单词数量、字符数量
语法：`wc [-c -m -l -w] 文件路径`
- -c，可选，统计byte数量
- -m，可选，统计字符数量
- -l，可选，统计行数
- -w，可选，统计单词数量
- 文件路径，必填，被统计的文件，**可作为内容输入端口**

管道符：`|`
作用：将管道符左边命令的结果，作为右边命令的输入(只要能产生内容输入的命令，都可以与管道做配合)
如`cat ~/test.txt | grep "long"`

### echo、tail、重定向符>
echo命令
作用：在命令行内输出指定内容
语法：`echo 输出的内容`
- 无需选项，只有一个参数，表示要输出的内容，复杂内容可以用" "包围
- 如在终端上显示：hello linux：`echo hello linux`
- 带有空格或\等特殊符号，建议用双引号包围
  因为不包围的话，空格容易被人误解为参数2

反引号:\`
作用：被\`包围的内容，会被作为命令执行，而非普通字符
如：
```
  echo `pwd`
```

重定向符：
- \>，将左侧命令的结果，**覆盖**写入到符号右侧指定的**文件**中
- \>>，将左侧命令的结果，**追加**写入到符号右侧指定的**文件**中

注意：会自动换行
如：
`echo "Hello Linux" > test.txt`
`echo "Hello Linux" >>test.txt`
`ls > test.txt`

tail命令：
作用：可以查看文件尾部内容，跟踪文件尾部的更改
语法：`tail [-f -num] Linux路径`
- -f选项，可选，即follow，表示持续跟踪
- -num，可选，表示查看尾部多少行，不填则默认10行
- 参数Linux路径，表示被跟踪的文件路径

Tips：使用-f跟踪后，可通过ctrl+c强制终止

### vi/vim编辑器
vi/vim即visual interface，linux最经典的文本编辑器，vi是命令行下对文本文件进行编辑的绝佳选择
vim是vi的加强版本，兼容vi所有指令，不仅能  编辑文本，还具有shell程序编辑功能

vi/vim三种工作模式：
- 命令模式(Command mode)：所敲的按键都将被编辑器理解为**命令**，以命令驱动执行不同的功能
  此模式下，不能自由进行文本编辑
- 输入模式(Insert mode)：即编辑模式、插入模式。此模式下，可对文件内容进行自由编辑
- 底线命令模式(Last line mode)：以`:`开始，通常用于文件的保存、退出

进入vi/vim：
`vi 文件路径`
`vim 文件路径`
- 如果文件路径表示的文件**不存在**，则此命令用于**编辑新文件**
- 如果文件路径表示的文件**存在**，则此命令用于**编辑已有文件**
- 默认情况下，进入**命令模式**，通过快捷键可切换至输入模式或底线命令模式，输入模式与底线命令模式不互通

常用快捷键：
![](image/vi编辑器快捷键1.jpg)
![](image/vi编辑器快捷键2.jpg)

### root用户
windows、MacOS、Linux均采用多用户管理模式进行权限管理
- 在Linux系统中，拥有最大权限的账户名为**root(超级管理员)**
- root用户拥有最大的系统操作权限，而普通用户在许多地方的权限是受限的
  - 普通用户的权限，一般在其HOME目录内是不受限的
  - 一旦出了HOME目录，大多数地方，普通用户仅有只读和执行权限，无修改权限

su和exit命令：
su——Switch User，属于系统命令
作用：切换账户
语法：`su [-] [用户名]`
- -，可选，表示是否在切换用户后加载环境变量，**建议带上**
- 用户名，可选，表示要切换的用户，若省略则表示默认切换到root
- 切换用户后，可以通过**exit命令**退回上一个用户，也可以使用快捷键ctrl+d

注意：
- 使用普通用户，切换到其他用户**需要输入密码**
- 使用root用户切换到其他用户，**无需密码**

sudo命令：
不建议长期使用root用户，避免带来系统损坏
但是可以使用sudo命令，为普通的命令授权，临时以root身份执行

语法：`sudo 其他命令`
- 并不是所有用户，都有权利使用sudo，**需要为普通用户配置sudo认证**

为普通用户配置sudo认证
- 切换到root用户，执行`visudo`命令，会自动通过vi编辑器打开：`/etc/sudoers`
- 在文件的**最后**添加：
  `用户名 ALL=(ALL)     NOPASSWD:ALL`
  其中最后的NOPASSWD:ALL表示使用sudo命令，无需输入密码
- 最后通过wq保存
- 切换回普通用户
- 该用户执行的sudo命令，则会以root运行

## 用户和用户组
linux系统中可以：
- 配置多个用户
- 配置多个用户组
- 用户可以加入多个用户组中

linux中关于权限的管控级别有两个级别：
- 针对用户的权限控制
- 针对用户组的权限控制

如针对某文件，可以控制用户的权限，也可以控制用户组的权限

### 用户组管理
注意：以下命令需要**root用户**执行
- 创建用户组
  `groupadd 用户组名`
- 删除用户组
  `groupdel 用户组名`

### 用户管理
注意：以下命令需要root用户执行
- 创建用户
  `useradd [-g -d] 用户名`
  - -g，可选，指定用户的组，
    若不指定-g，则会创建同名组并自动加入，
    指定-g需要组已经存在，如已存在同名组，必须使用-g
  - -d，可选，指定用户HOME路径，不指定则默认创建其HOME目录在:`/home/用户`
- 删除用户
  `userdel [-r] 用户名`
  - -r，删除用户的HOME目录，不使用-r时，删除用户将保留其HOME目录
- 查看用户所属组
  `id [用户名]`
  - 用户名，可选，为被查看的用户，如果不提供则查看当前用户
- 修改用户所属组
  `usermod -aG 用户组 用户名`
  将指定的用户加入指定的用户组

### getent
作用：查看当前系统中有哪些用户或组
语法：
- `getent passwd`查看系统全部**用户**信息
  查看的内容一共有7份信息：
  `用户名:密码(显示为x):用户ID:组ID:描述信息(无用):HOME目录:执行终端(默认bash)`
- `getent group`查看系统全部**组**信息
  查看的内容包含三份信息：
  `组名称:组认证(显示为x):组ID`

### 权限控制信息
通过`ls -l`可以用列表形式查看内容，并显示权限细节：
![](image/权限细节.jpg)

权限信息：
![](image/权限信息.jpg)
后面9位中，`-`表示无此权限

rwx
- r,read,即读权限
- w,write,即写权限
- x,execute,即执行权限

针对文件、文件夹的不同，rwx的含义有细微差别：
- r
  针对文件，可以查看文件内容
  针对文件夹，可以查看文件夹内容
- w
  针对文件，表示可以修改此文件
  针对文件夹，可以在文件夹内：创建、删除、改名等
- x
  针对文件，可以将文件作为程序执行
  针对文件夹，可以更改工作目录到此文件夹，即cd进入

### chmod命令
作用：修改文件、文件夹的权限信息
注意：只有文件、文件夹的**所属用户**或**root用户**可以修改
语法：`chmod [-R] 权限 文件或文件夹`
- -R，可选，表示对文件夹内的全部内容应用同样的操作

示例：`chmod u=rwx,g=rx,o=x hello.txt`
解释：u即修改user用户权限，g即修改组(group)权限，o即修改其他(other)权限

 权限的数字符号：
 r记为4，w记为2，x记为1
 - 0：无任何权限，即`---`
 - 1：仅有x权限，即`--x`
 - 2：仅有w权限，即`-w-`
 - 3：有w和x权限，即`-wx`
 - 4：仅有r权限，即`r--`
 - 5：有r和x权限，即`r-x`
 - 6：有r和w权限，即`rw-`
 - 7：有全部权限，即`rwx`

### chown命令
作用：修改文件、文件夹的所属用户和用户组
注意：普通用户无法修改所属为其他用户或组，此命令只适用于**root用户**执行
语法：`chown [-R] [用户] [:] [用户组] 文件或文件夹`
- -R，可选，表示对文件夹内部全部内容应用相同规则
- 用户，可选，修改所属用户
- `:`，可选，用于分隔用户和用户组，无该符号则默认修改的是所属用户
- 用户组，可选，修改所属的用户组

示例：
- `chown root hello.txt`，将hello.txt所属用户修改为root
- `chown :root hello.txt`，将hello.txt所属用户组修改为root
- `chown root:user1 hello.txt`，将hello.txt的所属用户修改为root，用户组修改为user1

## linux实用操作
### 快捷键
`ctrl+c`强制停止
- linux某些程序的运行，可以强制停止
- 输入命令错误，ctrl+c即退出当前出入

`ctrl+d`退出或登出
- 退出账户的登录
- 退出某些特定程序的专属页面
  注意：不能用于退出vi/vim

`history`命令，查看历史输入过的命令
- 可以联合grep过滤
- 最大的作用是找到以前的命令去复制粘贴

`!命令前缀`,自动执行上一次匹配前缀的命令
  如：!py，即从后往前找到输入命令中第一个匹配的命令并执行，注意：不宜用于寻找太久以前的命令

`ctrl+r`输入内容去匹配历史命令（从后往前）

光标移动：
- `ctrl+a`跳到命令开头
- `ctrl+e`跳到命令结尾
- `ctrl+键盘左键`向左跳一个单词
- `ctrl+键盘右键`向右跳一个单词

`ctrl+l`清屏
- 可以清楚终端的内容
- 也可以通过`clear`命令得到同样的效果

### linux系统软件安装
软件安装的常用方式：
- 下载安装包自行安装
- 系统的应用商店内安装

linux同样支持这两种方式

CentOS使用`yum`命令安装软件：
yum：RPM包软件管理器，用于自动化安装配置linux软件，可以自动解决依赖问题
注意：yum命令需要**root权限**，也需要**联网**
语法：`yum [-y] [install / remove / search] 软件名称`
- -y，可选，表示自动确认，无需手动确认安装或卸载过程
- install，可选，安装
- remove，可选，卸载
- search，可选，搜索

Ubuntu使用`apt`命令安装软件：
apt：DEB包软件管理器
语法：`apt [-y] [install / remove / search] 软件名称`

